openapi: 3.0.3
info:
  title: Hero Service API
  description: Hero management and stats. Note - Hero stats are updated asynchronously via RabbitMQ events from the Dungeon service after combat encounters.
  version: 1.0.0

servers:
  - url: http://localhost:3003/api

tags:
  - name: Heroes

paths:

  /heroes:
    post:
      tags: [Heroes]
      summary: Create a hero
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateHeroRequest'
      responses:
        201:
          description: Hero created
          content:
            application/json:
              schema:
                type: object
                properties:
                  heroId:
                    type: string
                    format: uuid
                  userId:
                    type: string
                    format: uuid

  /heroes/:userId/list:
    get:
      tags: [Heroes]
      summary: Get all heroes for a user
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: List of user heroes
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/HeroStats'

  /heroes/{heroId}:
    get:
      tags: [Heroes]
      summary: Get hero info
      parameters:
        - $ref: '#/components/parameters/HeroId'
      responses:
        200:
          description: Hero stats
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HeroStats'
    delete:
      tags: [Heroes]
      summary: Delete a hero
      parameters:
        - $ref: '#/components/parameters/HeroId'
      responses:
        204:
          description: Hero deleted

components:

  parameters:
    HeroId:
      name: heroId
      in: path
      required: true
      schema:
        type: string
        format: uuid

  schemas:

    CreateHeroRequest:
      type: object
      properties:
        userId:
          type: string
          format: uuid


    HeroStats:
      type: object
      properties:
        hero_id:
          type: string
          format: uuid
        user_id:
          type: string
          format: uuid
        level:
          type: integer
        xp:
          type: integer
        base_hp:
          type: integer
        current_hp:
          type: integer
        base_att:
          type: integer
        base_def:
          type: integer
        base_regen:
          type: integer
        updated_at:
          type: string
          format: date-time

