openapi: 3.0.3
info:
  title: Hero Service API
  description: Hero management and stats
  version: 1.0.0

servers:
  - url: http://localhost:3003/api

tags:
  - name: Heroes

paths:

  /heroes:
    post:
      tags: [Heroes]
      summary: Create a hero
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateHeroRequest'
      responses:
        201:
          description: Hero created
          content:
            application/json:
              schema:
                type: object
                properties:
                  heroId:
                    type: string
                    format: uuid

  /heroes/{heroId}:
    get:
      tags: [Heroes]
      summary: Get hero info
      parameters:
        - $ref: '#/components/parameters/HeroId'
      responses:
        200:
          description: Hero stats
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HeroStats'
    put:
      tags: [Heroes]
      summary: Update hero stats
      parameters:
        - $ref: '#/components/parameters/HeroId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateHeroRequest'
      responses:
        200:
          description: Hero updated
    delete:
      tags: [Heroes]
      summary: Delete a hero
      parameters:
        - $ref: '#/components/parameters/HeroId'
      responses:
        204:
          description: Hero deleted

  /heroes/{heroId}/xp:
    post:
      tags: [Heroes]
      summary: Add XP to hero
      parameters:
        - $ref: '#/components/parameters/HeroId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddXpRequest'
      responses:
        200:
          description: XP added and level calculated

components:

  parameters:
    HeroId:
      name: heroId
      in: path
      required: true
      schema:
        type: string
        format: uuid

  schemas:

    CreateHeroRequest:
      type: object
      properties:
        userId:
          type: string
          format: uuid

    UpdateHeroRequest:
      type: object
      properties:
        level:
          type: integer
        xp:
          type: integer
        base_hp:
          type: integer
        base_att:
          type: integer
        base_def:
          type: integer
        base_regen:
          type: integer
        artifact_slot_1:
          type: string
          format: uuid
        artifact_slot_2:
          type: string
          format: uuid
        artifact_slot_3:
          type: string
          format: uuid
        artifact_slot_4:
          type: string
          format: uuid

    HeroStats:
      type: object
      properties:
        hero_id:
          type: string
          format: uuid
        level:
          type: integer
        xp:
          type: integer
        base_hp:
          type: integer
        base_att:
          type: integer
        base_def:
          type: integer
        base_regen:
          type: integer
        artifact_slot_1:
          type: string
          format: uuid
        artifact_slot_2:
          type: string
          format: uuid
        artifact_slot_3:
          type: string
          format: uuid
        artifact_slot_4:
          type: string
          format: uuid
        updated_at:
          type: string
          format: date-time

    AddXpRequest:
      type: object
      properties:
        xp:
          type: integer
